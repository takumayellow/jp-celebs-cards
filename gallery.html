<!doctype html>
<meta charset="utf-8">
<title>Gallery - jp-celebs-cards</title>
<link rel="stylesheet" href="styles.css">
<style>
  body{background:#0b0e12;color:#ccd; font:14px/1.5 system-ui, -apple-system, Segoe UI, Noto Sans JP, sans-serif; padding:20px}
  h1{font-size:20px;margin:0 0 16px}
  .grid{display:grid; grid-template-columns:repeat(auto-fill,minmax(140px,1fr)); gap:12px}
  figure{margin:0; background:#111; border:1px solid #222; border-radius:10px; overflow:hidden}
  img{width:100%; height:160px; object-fit:cover; display:block}
  figcaption{padding:6px 8px; font-size:12px; color:#9aa}
  a{color:inherit; text-decoration:none}
  a:focus-visible{outline:2px solid #79f; outline-offset:3px}
</style>
<h1>Gallery</h1>
<div id="g">loading…</div>
<script>
(async()=>{
  const bust=Date.now();
  let map={};
  try{ map = await fetch('data/attr_map.json?v='+bust).then(r=>r.json()); }catch(e){ map={}; }
  const ids = Object.keys(map).sort((a,b)=>String(a).localeCompare(String(b),'ja'));
  const html = ids.map(id=>{
    const fn = map[id] || (id+'.jpg');
    const src = 'images/'+fn+'?v='+bust;
    return `<figure><a href="./?id=\${id}"><img loading="lazy" src="\${src}" alt="\${id}"><figcaption>\${id}</figcaption></a></figure>`;
  }).join('');
  document.getElementById('g').innerHTML = `<div class="grid">\${html}</div>`;
})();
</script>
